<my-element>
  <p #$paragraph>My paragraph</p>
</my-element>

<script type="module">
  import { upgrade } from '../../index.js';

  customElements.define('my-element', class MyElement extends HTMLElement {
    constructor() {
      super();

      upgrade(this, null);
    }
  });

  const $el = document.querySelector('my-element');

  if ($el.shadowRoot !== null)  {
    throw new Error('Found shadow dom even though itâ€™s supposed to be not there.');
  }

  if ($el.$refs === undefined || $el.$refs.$paragraph === undefined)  {
    throw new Error('Light dom references not found.');
  }
</script>
